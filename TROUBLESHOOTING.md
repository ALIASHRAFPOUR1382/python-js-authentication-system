# راهنمای عیب‌یابی

## مشکل: "ارتباط با سرور به خطا خورده"

### راه‌حل 1: بررسی اجرای سرور

1. **مطمئن شوید سرور در حال اجرا است:**
```bash
cd backend
python server.py
```

باید پیام زیر را ببینید:
```
سرور در حال اجرا در http://localhost:8000
برای توقف سرور Ctrl+C را فشار دهید
```

2. **بررسی پورت:**
اگر پورت 8000 در حال استفاده است، می‌توانید در فایل `backend/server.py` پورت را تغییر دهید:
```python
PORT = 8000  # به پورت دیگری تغییر دهید، مثلاً 8001
```

### راه‌حل 2: بررسی مرورگر

1. **باز کردن Console مرورگر:**
   - در Chrome/Edge: `F12` یا `Ctrl+Shift+I`
   - در Firefox: `F12` یا `Ctrl+Shift+K`
   - به تب "Console" بروید

2. **بررسی خطاها:**
   - اگر خطای CORS می‌بینید، مطمئن شوید سرور در حال اجرا است
   - اگر خطای "Failed to fetch" می‌بینید، سرور در حال اجرا نیست

### راه‌حل 3: بررسی آدرس API

در فایل `frontend/js/auth.js`، خط 2 را بررسی کنید:
```javascript
const API_BASE_URL = 'http://localhost:8000/api';
```

اگر سرور روی پورت دیگری اجرا می‌شود، این آدرس را تغییر دهید.

### راه‌حل 4: بررسی فایل‌های Python

مطمئن شوید همه فایل‌های زیر وجود دارند:
- `backend/server.py`
- `backend/database.py`
- `backend/auth.py`
- `backend/otp_manager.py`

### راه‌حل 5: بررسی پوشه data

پوشه `data` باید خودکار ایجاد شود. اگر مشکل دارید، به صورت دستی ایجاد کنید:
```bash
mkdir data
```

### راه‌حل 6: تست دستی API

در مرورگر، به آدرس زیر بروید:
```
http://localhost:8000/api/check-auth
```

باید یک پاسخ JSON ببینید:
```json
{"success": true, "authenticated": false}
```

اگر خطا می‌بینید، سرور درست کار نمی‌کند.

### راه‌حل 7: بررسی لاگ‌های سرور

هنگام ثبت نام، در کنسول Python باید پیام زیر را ببینید:
```
[OTP برای example@email.com]: 123456
```

اگر این پیام را نمی‌بینید، درخواست به سرور نمی‌رسد.

## مشکل: OTP ارسال نمی‌شود

### بررسی‌ها:

1. **بررسی کنسول Python:**
   - کد OTP در کنسول Python نمایش داده می‌شود
   - به دنبال پیام `[OTP برای ...]` باشید

2. **بررسی فرم OTP:**
   - بعد از ثبت نام، فرم OTP باید نمایش داده شود
   - اگر نمایش داده نمی‌شود، مشکل در JavaScript است

3. **بررسی Console مرورگر:**
   - خطاهای JavaScript را بررسی کنید
   - مطمئن شوید `result.success` برابر `true` است

## مشکل: خطای Python

اگر خطای Python می‌بینید:

1. **بررسی نسخه Python:**
```bash
python --version
```
باید Python 3.7 یا بالاتر باشد.

2. **بررسی import ها:**
مطمئن شوید همه فایل‌های Python در پوشه `backend` هستند.

3. **بررسی مسیرها:**
اگر خطای `ModuleNotFoundError` می‌بینید، مطمئن شوید در پوشه `backend` هستید:
```bash
cd backend
python server.py
```

## تست سریع

1. سرور را اجرا کنید
2. در مرورگر به `http://localhost:8000` بروید
3. Console مرورگر را باز کنید (F12)
4. ثبت نام کنید
5. در Console مرورگر و کنسول Python، خطاها را بررسی کنید

## تماس برای کمک

اگر مشکل حل نشد:
1. لاگ‌های کنسول Python را کپی کنید
2. خطاهای Console مرورگر را کپی کنید
3. مراحل انجام شده را یادداشت کنید

