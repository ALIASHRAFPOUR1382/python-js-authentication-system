# ๐ Python & JavaScript Authentication System

[![Python](https://img.shields.io/badge/Python-3.7+-blue.svg)](https://www.python.org/)
[![JavaScript](https://img.shields.io/badge/JavaScript-ES6+-yellow.svg)](https://developer.mozilla.org/en-US/docs/Web/JavaScript)
[![License](https://img.shields.io/badge/License-MIT-green.svg)](LICENSE)

ฺฉ ุณุณุชู ฺฉุงูู ุงุญุฑุงุฒ ููุช (Authentication) ุจุง ุงุณุชูุงุฏู ุงุฒ Python ุฎุงู (ุจุฏูู ูุฑููุฑฺฉ) ุจุฑุง ุจฺฉโุงูุฏ ู JavaScript/HTML/CSS ุจุฑุง ูุฑุงูุชโุงูุฏ. ุงู ูพุฑูฺู ุดุงูู ุซุจุชโูุงูุ ูุฑูุฏุ ุชุฃุฏ OTPุ ูุฏุฑุช Session ู ุฑุงุจุท ฺฉุงุฑุจุฑ ูุฏุฑู ุจุง ูพุดุชุจุงู RTL ุงุณุช.

## โจ ูฺฺฏโูุง

- โ **ุซุจุช ูุงู ฺฉุงุฑุจุฑ** - ุจุง ูุงูุ ูุงู ุฎุงููุงุฏฺฏุ ุงูู ุง ุดูุงุฑู ุชููู
- โ **ุชุฃุฏ OTP** - ุงุฑุณุงู ฺฉุฏ ุชุฃุฏ 6 ุฑูู ุงุฒ ุทุฑู ุงูู
- โ **ูุฑูุฏ ููุดููุฏ** - ูุฑูุฏ ูุณุชูู ุจุง ฺฉูฺฉ ูุนุชุจุฑ (2 ุฑูุฒู)
- โ **ูุฏุฑุช Session** - ูุฏุฑุช ุฎูุฏฺฉุงุฑ session ุจุง ฺฉูฺฉโูุง ุงูู
- โ **ุฑุงุจุท ฺฉุงุฑุจุฑ ูุฏุฑู** - ุทุฑุงุญ Split-Screen ุจุง ุงููุดูโูุง ุญุฑููโุง
- โ **ูพุดุชุจุงู RTL** - ุฑุงุจุท ฺฉุงุฑุจุฑ ูุงุฑุณ ุจุง ฺุฏูุงู ุฑุงุณุช ุจู ฺูพ
- โ **ูุงฺฉูุดโฺฏุฑุง** - ุทุฑุงุญ Responsive ุจุฑุง ููุจุงูุ ุชุจูุช ู ุฏุณฺฉุชุงูพ
- โ **ุงููุช** - ฺฉูฺฉโูุง HttpOnly ู SameSite ุจุฑุง ูุญุงูุธุช ุงุฒ session

## ๐ ุดุฑูุน ุณุฑุน

### ูพุดโูุงุฒูุง

- Python 3.7 ุง ุจุงูุงุชุฑ
- ูุฑูุฑฺฏุฑ ูุจ ูุฏุฑู (Chrome, Firefox, Edge, Safari)
- ุฏุณุชุฑุณ ุจู ุงูุชุฑูุช (ุจุฑุง ุงุฑุณุงู ุงูู OTP)

### ูุตุจ ู ุฑุงูโุงูุฏุงุฒ

1. **ฺฉููู ุง ุฏุงูููุฏ ูพุฑูฺู**
   ```bash
   git clone https://github.com/yourusername/python-js-authentication-system.git
   cd python-js-authentication-system
   ```

2. **ุชูุธู ุงูู (ุงุฎุชุงุฑ)**
   
   ุจุฑุง ุงุฑุณุงู ูุงูุน OTP ุงุฒ ุทุฑู ุงูู:
   ```bash
   python setup_email.py
   ```
   
   ุง ูุงู `email_config.json` ุฑุง ุจู ุตูุฑุช ุฏุณุช ุงุฌุงุฏ ฺฉูุฏ:
   ```json
   {
     "smtp_server": "smtp.gmail.com",
     "smtp_port": 587,
     "email": "your-email@gmail.com",
     "password": "your-app-password"
   }
   ```
   
   > ๐ **ูฺฉุชู**: ุจุฑุง Gmailุ ุจุงุฏ ุงุฒ [App Password](https://support.google.com/accounts/answer/185833) ุงุณุชูุงุฏู ฺฉูุฏ.

3. **ุงุฌุฑุง ุณุฑูุฑ**
   
   **Windows:**
   ```bash
   start_server.bat
   ```
   
   **Linux/Mac:**
   ```bash
   chmod +x start_server.sh
   ./start_server.sh
   ```
   
   **ุง ุจู ุตูุฑุช ุฏุณุช:**
   ```bash
   cd backend
   python server.py
   ```

4. **ุจุงุฒ ฺฉุฑุฏู ูุฑูุฑฺฏุฑ**
   
   ูุฑูุฑฺฏุฑ ุฎูุฏ ุฑุง ุจุงุฒ ฺฉูุฏ ู ุจู ุขุฏุฑุณ ุฒุฑ ุจุฑูุฏ:
   ```
   http://localhost:8000
   ```

## ๐ ุฑุงูููุง ุงุณุชูุงุฏู

### ุซุจุช ูุงู

1. ุจู ุตูุญู ุซุจุชโูุงู ุจุฑูุฏ (`http://localhost:8000/register.html`)
2. ูุงูุ ูุงู ุฎุงููุงุฏฺฏ ู ุงูู ุง ุดูุงุฑู ุชููู ุฑุง ูุงุฑุฏ ฺฉูุฏ
3. ุฑู ุฏฺฉูู "Sign Up" ฺฉูฺฉ ฺฉูุฏ
4. ฺฉุฏ OTP 6 ุฑูู ุฑุง ุงุฒ ุงูู ุฎูุฏ ุฏุฑุงูุช ฺฉูุฏ
5. ฺฉุฏ ุฑุง ูุงุฑุฏ ฺฉูุฏ ู ุซุจุชโูุงู ุฑุง ุชฺฉูู ฺฉูุฏ
6. ูพุณ ุงุฒ ุชุฃุฏุ ุจู ุฏุงุดุจูุฑุฏ ูุฏุงุช ูโุดูุฏ

### ูุฑูุฏ

1. ุจู ุตูุญู ูุฑูุฏ ุจุฑูุฏ (`http://localhost:8000/index.html`)
2. ุงูู ุง ุดูุงุฑู ุชููู ุฎูุฏ ุฑุง ูุงุฑุฏ ฺฉูุฏ
3. **ุงฺฏุฑ ฺฉูฺฉ ูุนุชุจุฑ ุฏุงุฑุฏ (ฺฉูุชุฑ ุงุฒ 2 ุฑูุฒ)**: ูุณุชููุงู ูุงุฑุฏ ูโุดูุฏ
4. **ุฏุฑ ุบุฑ ุงู ุตูุฑุช**: ฺฉุฏ OTP ุจุฑุง ุดูุง ุงุฑุณุงู ูโุดูุฏ
5. ฺฉุฏ ุฑุง ูุงุฑุฏ ฺฉูุฏ ู ูุงุฑุฏ ุดูุฏ

### ุฎุฑูุฌ

ุงุฒ ุฏุงุดุจูุฑุฏุ ุฑู ุฏฺฉูู "Logout" ฺฉูฺฉ ฺฉูุฏ.

## ๐ ุณุงุฎุชุงุฑ ูพุฑูฺู

```
.
โโโ backend/
โ   โโโ server.py          # ุณุฑูุฑ HTTP ุงุตู
โ   โโโ database.py        # ูุฏุฑุช ูพุงฺฏุงู ุฏุงุฏู JSON
โ   โโโ auth.py            # ูุฏุฑุช ุงุญุฑุงุฒ ููุช ู session
โ   โโโ otp_manager.py     # ูุฏุฑุช ฺฉุฏูุง OTP
โ   โโโ email_sender.py    # ุงุฑุณุงู ุงูู OTP
โโโ frontend/
โ   โโโ index.html         # ุตูุญู ูุฑูุฏ
โ   โโโ register.html      # ุตูุญู ุซุจุช ูุงู
โ   โโโ dashboard.html     # ุฏุงุดุจูุฑุฏ ฺฉุงุฑุจุฑ
โ   โโโ css/
โ   โ   โโโ style.css      # ุงุณุชุงูโูุง CSS
โ   โโโ js/
โ       โโโ auth.js        # ููุทู JavaScript
โโโ data/                  # ูพูุดู ุฐุฎุฑู ุฏุงุฏูโูุง (ุฎูุฏฺฉุงุฑ ุงุฌุงุฏ ูโุดูุฏ)
โ   โโโ users.json         # ุงุทูุงุนุงุช ฺฉุงุฑุจุฑุงู
โ   โโโ otp_storage.json   # ฺฉุฏูุง OTP
โ   โโโ temp_data.json     # ุฏุงุฏูโูุง ูููุช
โโโ start_server.bat       # ุงุณฺฉุฑูพุช ุงุฌุฑุง ุณุฑูุฑ (Windows)
โโโ start_server.sh        # ุงุณฺฉุฑูพุช ุงุฌุฑุง ุณุฑูุฑ (Linux/Mac)
โโโ setup_email.py         # ุฑุงูโุงูุฏุงุฒ ุชูุธูุงุช ุงูู
โโโ test_email.py          # ุชุณุช ุงุฑุณุงู ุงูู
โโโ cleanup_database.py    # ูพุงฺฉุณุงุฒ ุฏุงุฏูโูุง ุชุณุช
โโโ README.md              # ุงู ูุงู
โโโ HOW_TO_RUN.md         # ุฑุงูููุง ุงุฌุฑุง
โโโ TROUBLESHOOTING.md    # ุฑุงูููุง ุนุจโุงุจ
โโโ .gitignore            # ูุงูโูุง ูุงุฏุฏู ฺฏุฑูุชู ุดุฏู
```

## ๐ API Endpoints

### POST `/api/register`
ุซุจุช ูุงู ฺฉุงุฑุจุฑ ุฌุฏุฏ

**Request:**
```json
{
  "first_name": "Ali",
  "last_name": "Ahmadi",
  "email": "ali@example.com",
  "phone": "09123456789"
}
```

**Response:**
```json
{
  "success": true,
  "message": "Verification code sent",
  "data": {
    "identifier": "ali@example.com"
  }
}
```

### POST `/api/verify-otp`
ุชุฃุฏ ฺฉุฏ OTP ุจุฑุง ุซุจุช ูุงู

**Request:**
```json
{
  "identifier": "ali@example.com",
  "otp": "123456"
}
```

**Response:**
```json
{
  "success": true,
  "message": "Registration successful",
  "data": {
    "user": {
      "first_name": "Ali",
      "last_name": "Ahmadi",
      "email": "ali@example.com",
      "phone": "09123456789"
    }
  }
}
```

### POST `/api/login`
ูุฑูุฏ ุจู ุณุณุชู

**Request:**
```json
{
  "email": "ali@example.com",
  "phone": "09123456789"
}
```

**Response (Direct Login):**
```json
{
  "success": true,
  "data": {
    "direct_login": true,
    "user": {
      "first_name": "Ali",
      "last_name": "Ahmadi"
    }
  }
}
```

**Response (Requires OTP):**
```json
{
  "success": true,
  "message": "Verification code sent",
  "data": {
    "identifier": "ali@example.com",
    "requires_verification": true
  }
}
```

### POST `/api/verify-login-otp`
ุชุฃุฏ ฺฉุฏ OTP ุจุฑุง ูุฑูุฏ

**Request:**
```json
{
  "identifier": "ali@example.com",
  "otp": "123456"
}
```

### GET `/api/check-auth`
ุจุฑุฑุณ ูุถุนุช ุงุญุฑุงุฒ ููุช

**Response:**
```json
{
  "success": true,
  "authenticated": true,
  "user": {
    "first_name": "Ali",
    "last_name": "Ahmadi",
    "email": "ali@example.com",
    "phone": "09123456789"
  }
}
```

### POST `/api/logout`
ุฎุฑูุฌ ุงุฒ ุณุณุชู

**Response:**
```json
{
  "success": true,
  "message": "Logout successful"
}
```

## ๐ ุงููุช

- โ ฺฉุฏูุง OTP ูพุณ ุงุฒ 5 ุฏููู ูููุถ ูโุดููุฏ
- โ Sessionโูุง ูพุณ ุงุฒ 2 ุฑูุฒ ูููุถ ูโุดููุฏ
- โ ฺฉูฺฉโูุง ุจุง `HttpOnly` ู `SameSite=Lax` ุชูุธู ุดุฏูโุงูุฏ
- โ ุงุณุชูุงุฏู ุงุฒ tokenโูุง ุงูู ุจุฑุง session
- โ ุงุนุชุจุงุฑุณูุฌ ูุฑูุฏโูุง ฺฉุงุฑุจุฑ
- โ ูุญุงูุธุช ุฏุฑ ุจุฑุงุจุฑ ุชฺฉุฑุงุฑ OTP

## โ๏ธ ูฺฉุงุช ููู

> **ุงู ูพุฑูฺู ุจุฑุง ุงุณุชูุงุฏู ุขููุฒุด ู ุชูุณุนู ุงุณุช**

- ๐ ุฏุฑ ูุญุท productionุ ุจุงุฏ ุงุฒ HTTPS ุงุณุชูุงุฏู ฺฉูุฏ
- ๐ง ุจุฑุง ุงุฑุณุงู ูุงูุน OTPุ ุจุงุฏ ุงุฒ ุณุฑูุณโูุง SMS/Email ุงุณุชูุงุฏู ฺฉูุฏ
- ๐๏ธ ุจุฑุง ุงููุช ุจุดุชุฑุ ุงุฒ ุฏุชุงุจุณ ูุงูุน (PostgreSQL, MySQL) ุงุณุชูุงุฏู ฺฉูุฏ
- ๐ก๏ธ ุจุฑุง ุงููุช ุจุดุชุฑุ ุงุฒ ูุฑููุฑฺฉโูุง ุงูู ูุงููุฏ Flask ุง Django ุงุณุชูุงุฏู ฺฉูุฏ
- ๐ ุฏุงุฏูโูุง ุฏุฑ ูุงู JSON ุฐุฎุฑู ูโุดููุฏ (ุจุฑุง production ุงุฒ ุฏุชุงุจุณ ูุงูุน ุงุณุชูุงุฏู ฺฉูุฏ)

## ๐๏ธ ุชูุณุนู

### ุงูุฒูุฏู ุณุฑูุณ ุงุฑุณุงู OTP ูุงูุน

ุฏุฑ ูุงู `backend/email_sender.py`ุ ูโุชูุงูุฏ ุงุฒ ุณุฑูุณโูุง ุฒุฑ ุงุณุชูุงุฏู ฺฉูุฏ:

- **SMS**: ุงุณุชูุงุฏู ุงุฒ API ุณุฑูุณโูุง SMS ุงุฑุงู (ฺฉุงููโูพุงูฺฉุ ูพุงูฺฉโฺฏุณุชุฑุ ...)
- **Email**: ุงุณุชูุงุฏู ุงุฒ SMTP ุจุฑุง ุงุฑุณุงู ุงูู (Gmail, Outlook, ...)

### ุชุบุฑ ูุฏุช ุฒูุงู session

ุฏุฑ ูุงู `backend/server.py`ุ ูุชุบุฑ `max_age_days` ุฏุฑ ูุชุฏ `_set_cookie` ุฑุง ุชุบุฑ ุฏูุฏ:
```python
cookie = self._set_cookie('session_token', session_token, max_age_days=2)
```

### ุชุบุฑ ูุฏุช ุฒูุงู OTP

ุฏุฑ ูุงู `backend/otp_manager.py`ุ ูุชุบุฑ `OTP_EXPIRY_MINUTES` ุฑุง ุชุบุฑ ุฏูุฏ:
```python
OTP_EXPIRY_MINUTES = 5  # ุชุบุฑ ุจู ุฒูุงู ุฏูุฎูุงู
```

## ๐ ุนุจโุงุจ

ุงฺฏุฑ ุจุง ูุดฺฉู ููุงุฌู ุดุฏุฏุ ุจู ูุงู [TROUBLESHOOTING.md](TROUBLESHOOTING.md) ูุฑุงุฌุนู ฺฉูุฏ.

### ูุดฺฉูุงุช ุฑุงุฌ

1. **ุฎุทุง 404**: ูุทูุฆู ุดูุฏ ุณุฑูุฑ ุฏุฑ ุญุงู ุงุฌุฑุง ุงุณุช
2. **OTP ุฏุฑุงูุช ููโุดูุฏ**: ุชูุธูุงุช ุงูู ุฑุง ุจุฑุฑุณ ฺฉูุฏ
3. **ุฎุทุง SMTP**: ุงุฒ App Password ุจุฑุง Gmail ุงุณุชูุงุฏู ฺฉูุฏ

## ๐ ูุฌูุฒ

ุงู ูพุฑูฺู ุจุฑุง ุงุณุชูุงุฏู ุขุฒุงุฏ ุงุณุช.

## ๐ค ูุดุงุฑฺฉุช

ูุดุงุฑฺฉุชโูุงุ ูพุดููุงุฏุงุช ู ฺฏุฒุงุฑุด ุจุงฺฏโูุง ุฎูุดโุขูุฏ ูุณุชูุฏ! ูุทูุงู:

1. Fork ฺฉูุฏ
2. ฺฉ branch ุงุฌุงุฏ ฺฉูุฏ (`git checkout -b feature/AmazingFeature`)
3. ุชุบุฑุงุช ุฑุง commit ฺฉูุฏ (`git commit -m 'Add some AmazingFeature'`)
4. Push ฺฉูุฏ (`git push origin feature/AmazingFeature`)
5. Pull Request ุจุงุฒ ฺฉูุฏ

## ๐ง ูพุดุชุจุงู

ุฏุฑ ุตูุฑุช ุจุฑูุฒ ูุดฺฉู ุง ุณูุงู:

- ๐ ุจู [TROUBLESHOOTING.md](TROUBLESHOOTING.md) ูุฑุงุฌุนู ฺฉูุฏ
- ๐ ฺฉ Issue ุงุฌุงุฏ ฺฉูุฏ
- ๐ฌ ุณูุงูุงุช ุฎูุฏ ุฑุง ุฏุฑ Discussions ูุทุฑุญ ฺฉูุฏ

## ๐ ูฺฺฏโูุง ุขูุฏู

- [ ] ูพุดุชุจุงู ุงุฒ 2FA (Two-Factor Authentication)
- [ ] ุจุงุฒุงุจ ุฑูุฒ ุนุจูุฑ
- [ ] ุชุบุฑ ุงุทูุงุนุงุช ฺฉุงุฑุจุฑ
- [ ] ูพุดุชุจุงู ุงุฒ ฺูุฏู ุฒุจุงู
- [ ] ุงุชุตุงู ุจู ุฏุชุงุจุณ ูุงูุน (PostgreSQL, MySQL)
- [ ] ูพุดุชุจุงู ุงุฒ OAuth (Google, GitHub, ...)
- [ ] ูุงฺฏโฺฏุฑ ู ูุงูุชูุฑูฺฏ
- [ ] ุชุณุชโูุง ุฎูุฏฺฉุงุฑ

## ๐ ุขูุงุฑ ูพุฑูฺู

- **ุฒุจุงูโูุง**: Python, JavaScript, HTML, CSS
- **ูุฑููุฑฺฉ**: ุจุฏูู ูุฑููุฑฺฉ (Raw Python)
- **ุฐุฎุฑูโุณุงุฒ**: JSON Files
- **ูพุฑูุชฺฉู**: HTTP/1.0
- **ูพูุฑุช**: 8000

---

<div align="center">

**ุณุงุฎุชู ุดุฏู ุจุง โค๏ธ ุจุฑุง ุงุฏฺฏุฑ ู ุชูุณุนู**

โญ ุงฺฏุฑ ุงู ูพุฑูฺู ุจุฑุง ุดูุง ููุฏ ุจูุฏุ ฺฉ ุณุชุงุฑู ุจุฏูุฏ!

</div>
